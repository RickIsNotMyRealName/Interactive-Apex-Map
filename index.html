<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Map Visualizer + Drawing Tools</title>
  <!-- Favicon -->
  <link rel="icon" href="/favicon.png">
  <!-- Main stylesheet -->
  <link rel="stylesheet" href="css/styles.css">
  <!-- Fabric.js for drawing overlay -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
</head>
<body>
  <div id="container">
    <div id="sidebar">
      <h1>Map Visualizer</h1>

      <details open>
        <summary>Data</summary>
        <label>Choose a built-in map:
          <select id="defaultMapSelect">
            <option value="">‚Äì Select ‚Äì</option>
          </select>
        </label>
        <div id="customJsonContainer" style="display:none;">
          <small style="display:block;margin:4px 0;">‚Ä¶or load your own JSON:</small>
          <label>Custom JSON:
            <input type="file" id="combinedInput" accept=".json">
          </label>
        </div>
      </details>

      <details open>
        <summary>Entity Types Config</summary>
        <label>Default from <code>entityTypes/entity-types.json</code></label>
        <label>Override Config:
          <input type="file" id="etConfigInput" accept=".json">
        </label>
      </details>

      <details open>
        <summary>Entity Types</summary>
        <div id="entityTypes"></div>
      </details>

      <details>
        <summary>Filters</summary>
        <div id="filters"></div>
      </details>

      <details>
        <summary>Legend</summary>
        <div id="legend"></div>
      </details>

      <details open>
        <summary>Height Colouring</summary>
        <label>Min H:
          <input type="number" id="heightMinInput">
        </label>
        <label>Max H:
          <input type="number" id="heightMaxInput">
        </label>
        <label><input type="checkbox" id="hideOutCB"> Hide out-of-range</label>
        <small>&lt; min ‚Üí cyan, &gt; max ‚Üí magenta</small>
        <div id="heightLegend"></div>
      </details>
    </div>

    <div id="main">
      <div id="toolbar">
        <button id="selectBtn">Select</button>
        <button id="rectBtn">Rectangle</button>
        <button id="circleBtn">Circle</button>
        <button id="ellipseBtn">Ellipse</button>
        <button id="pencilBtn">Freehand</button>
        <button id="textBtn">Text</button>
        <button id="arrowBtn">Arrow</button>
        <label>Image: <input type="file" id="imageInput" accept="image/*"></label>
        <button id="groupBtn">Group</button>
        <button id="ungroupBtn">Ungroup</button>
        <button id="bringForwardBtn">Bring Forward</button>
        <button id="sendBackwardBtn">Send Back</button>
        <button id="deleteBtn">üóëÔ∏è Delete</button>
      </div>

      <div id="canvasContainer">
        <canvas id="mapCanvas"></canvas>
        <canvas id="drawingCanvas"></canvas>
      </div>

      <div id="tooltip"></div>
    </div>
  </div>

  <!-- Application entrypoint -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
